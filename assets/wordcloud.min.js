!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/modules/wordcloud",["highcharts"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function o(t,o,e,i){t.hasOwnProperty(o)||(t[o]=i.apply(null,e))}o(t=t?t._modules:{},"Mixins/Polygon.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,o){function n(t,o){return o=u(o)?o:14,o=Math.pow(10,o),Math.round(t*o)/o}function r(t,o){return t=t.map(function(t){return t[0]*o[0]+t[1]*o[1]}),{min:Math.min.apply(this,t),max:Math.max.apply(this,t)}}function i(t,o){var e=t[0];t=t[1];var i=d*-o;return o=Math.cos(i),i=Math.sin(i),[n(e*o-t*i),n(e*i+t*o)]}function s(t,o,e){return[(t=i([t[0]-o[0],t[1]-o[1]],e))[0]+o[0],t[1]+o[1]]}function a(t){var r=t.axes;return e(r)||(r=[],t.concat([t[0]]).reduce(function(t,o){var e,i,n=(e=t,t=(i=o)[0]-e[0],[-(e=i[1]-e[1]),t]);return l(r,function(t){return t[0]===n[0]&&t[1]===n[1]})||r.push(n),o}),t.axes=r),r}var l=o.find,e=o.isArray,u=o.isNumber,d=t.deg2rad;return{getBoundingBoxFromPolygon:function(t){return t.reduce(function(t,o){var e=o[0];return o=o[1],t.left=Math.min(e,t.left),t.right=Math.max(e,t.right),t.bottom=Math.max(o,t.bottom),t.top=Math.min(o,t.top),t},{left:Number.MAX_VALUE,right:-Number.MAX_VALUE,bottom:-Number.MAX_VALUE,top:Number.MAX_VALUE})},getPolygon:function(t,o,e,i,n){var r=[t,o],a=t-e/2;return t+=e/2,[[a,e=o-i/2],[t,e],[t,o+=i/2],[a,o]].map(function(t){return s(t,r,-n)})},isPolygonsColliding:function(e,i){var t,o,o=(o=i,t=a(t=e),o=a(o),t.concat(o));return!l(o,function(t){var o=r(e,t);return!!((t=r(i,t)).min>o.max||t.max<o.min)})},movePolygon:function(o,e,t){return t.map(function(t){return[t[0]+o,t[1]+e]})},rotate2DToOrigin:i,rotate2DToPoint:s}}),o(t,"Mixins/DrawPoint.js",[],function(){function u(t){return"function"==typeof t}function o(t){var o,e=this,i=e.graphic,n=t.animatableAttribs,r=t.onComplete,a=t.css,s=t.renderer,l=null===(l=e.series)||void 0===l?void 0:l.options.animation;e.shouldDraw()?(i||(e.graphic=i=s[t.shapeType](t.shapeArgs).add(t.group)),i.css(a).attr(t.attribs).animate(n,!t.isNew&&l,r)):i&&(o=function(){e.graphic=i=i.destroy(),u(r)&&r()},Object.keys(n).length?i.animate(n,void 0,function(){o()}):o())}return{draw:o,drawPoint:function(t){(t.attribs=t.attribs||{}).class=this.getClassName(),o.call(this,t)},isFn:u}}),o(t,"Series/Wordcloud/WordcloudPoint.js",[t["Mixins/DrawPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,o,e){var i,n,r=this&&this.__extends||(i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)});function a(){var t=null!==n&&n.apply(this,arguments)||this;return t.dimensions=void 0,t.options=void 0,t.polygon=void 0,t.rect=void 0,t.series=void 0,t}return e=e.extend,n=o.seriesTypes.column.prototype.pointClass,r(a,n),a.prototype.shouldDraw=function(){return!this.isNull},a.prototype.isValid=function(){return!0},e((o=a).prototype,{draw:t.drawPoint,weight:1}),o}),o(t,"Series/Wordcloud/WordcloudUtils.js",[t["Mixins/Polygon.js"],t["Core/Utilities.js"]],function(t,o){var e,s=t.isPolygonsColliding,d=t.movePolygon,c=o.extend,l=o.find,r=o.isNumber,h=o.isObject,a=o.merge;function u(t,o){return!(o.left>t.right||o.right<t.left||o.top>t.bottom||o.bottom<t.top)}function p(e,t){function i(t){var o=u(n,t.rect);return o&&(e.rotation%90||t.rotation%90)&&(o=s(r,t.polygon)),o}var o=!1,n=e.rect,r=e.polygon,a=e.lastCollidedWith;return a&&((o=i(a))||delete e.lastCollidedWith),o=o||!!l(t,function(t){var o=i(t);return o&&(e.lastCollidedWith=t),o})}function i(t,o){o=4*t;var e=Math.ceil((Math.sqrt(o)-1)/2),i=2*e+1,n=Math.pow(i,2),r=!1;return--i,t<=1e4&&("boolean"==typeof r&&n-i<=o&&(r={x:e-(n-o),y:-e}),n-=i,"boolean"==typeof r&&n-i<=o&&(r={x:-e,y:n-o-e}),n-=i,"boolean"==typeof r&&(r=n-i<=o?{x:n-o-e,y:e}:{x:e,y:e-(n-o-i)}),r.x*=5,r.y*=5),r}function g(t,o){var e=o.width/2,i=-o.height/2,n=o.height/2;return!(-o.width/2<t.left&&e>t.right&&i<t.top&&n>t.bottom)}return(o=e=e||{}).isRectanglesIntersecting=u,o.intersectsAnyWord=p,o.archimedeanSpiral=function(t,o){var e=o.field;o=!1,e=e.width*e.width+e.height*e.height;var i=.8*t;return t<=1e4&&(o={x:i*Math.cos(i),y:i*Math.sin(i)},Math.min(Math.abs(o.x),Math.abs(o.y))<e||(o=!1)),o},o.squareSpiral=i,o.rectangularSpiral=function(t,o){return t=i(t),o=o.field,t&&(t.x*=o.ratioX,t.y*=o.ratioY),t},o.getRandomPosition=function(t){return Math.round(t*(Math.random()+.5)/2)},o.getScale=function(t,o,e){var i=2*Math.max(Math.abs(e.top),Math.abs(e.bottom));return e=2*Math.max(Math.abs(e.left),Math.abs(e.right)),Math.min(0<e?1/e*t:1,0<i?1/i*o:1)},o.getPlayingField=function(t,o,e){e=e.reduce(function(t,o){o=o.dimensions;var e=Math.max(o.width,o.height);return t.maxHeight=Math.max(t.maxHeight,o.height),t.maxWidth=Math.max(t.maxWidth,o.width),t.area+=e*e,t},{maxHeight:0,maxWidth:0,area:0});var i=o<t?t/o:1;return{width:(e=Math.max(e.maxHeight,e.maxWidth,.85*Math.sqrt(e.area)))*i,height:e*(t=t<o?o/t:1),ratioX:i,ratioY:t}},o.getRotation=function(t,o,e,i){var n=!1;return r(t)&&r(o)&&r(e)&&r(i)&&0<t&&-1<o&&e<i&&(n=e+o%t*((i-e)/(t-1||1))),n},o.getSpiral=function(t,o){for(var e=[],i=1;i<1e4;i++)e.push(t(i,o));return function(t){return t<=1e4&&e[t-1]}},o.outsidePlayingField=g,o.intersectionTesting=function(t,o){var e=o.placed,i=o.field,n=o.rectangle,r=o.polygon,a=o.spiral,s=1,l={x:0,y:0},u=t.rect=c({},n);for(t.polygon=r,t.rotation=o.rotation;!1!==l&&(p(t,e)||g(u,i));)l=a(s),h(l)&&(u.left=n.left+l.x,u.right=n.right+l.x,u.top=n.top+l.y,u.bottom=n.bottom+l.y,t.polygon=d(l.x,l.y,r)),s++;return l},o.extendPlayingField=function(t,o){var e,i,n;return h(t)&&h(o)&&(n=o.bottom-o.top,e=o.right-o.left,o=t.ratioX,n=n*(i=t.ratioY)<e*o?e:n,t=a(t,{width:t.width+n*o*2,height:t.height+n*i*2})),t},o.updateFieldBoundaries=function(t,o){return(!r(t.left)||t.left>o.left)&&(t.left=o.left),(!r(t.right)||t.right<o.right)&&(t.right=o.right),(!r(t.top)||t.top>o.top)&&(t.top=o.top),(!r(t.bottom)||t.bottom<o.bottom)&&(t.bottom=o.bottom),t},e}),o(t,"Series/Wordcloud/WordcloudSeries.js",[t["Core/Globals.js"],t["Mixins/Polygon.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Series/Wordcloud/WordcloudPoint.js"],t["Series/Wordcloud/WordcloudUtils.js"]],function(e,t,o,i,n,r,M){var a,s=this&&this.__extends||(a=function(t,o){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}a(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),l=e.noop,P=t.getBoundingBoxFromPolygon,S=t.getPolygon,u=t.isPolygonsColliding,d=t.rotate2DToOrigin;t=t.rotate2DToPoint;var c,h=i.seriesTypes.column,A=n.extend,p=n.isArray,g=n.isNumber,j=n.isObject,f=n.merge;function y(){var t=null!==c&&c.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return s(y,c=h),y.prototype.bindAxes=function(){var t={endOnTick:!1,gridLineWidth:0,lineWidth:0,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]};o.prototype.bindAxes.call(this),A(this.yAxis.options,t),A(this.xAxis.options,t)},y.prototype.pointAttribs=function(t,o){return delete(t=e.seriesTypes.column.prototype.pointAttribs.call(this,t,o)).stroke,delete t["stroke-width"],t},y.prototype.deriveFontSize=function(t,o,e){return t=g(t)?t:0,o=g(o)?o:1,e=g(e)?e:1,Math.floor(Math.max(e,t*o))},y.prototype.drawPoints=function(){var l=this,u=l.hasRendered,t=l.xAxis,o=l.yAxis,d=l.group,c=l.options,h=c.animation,p=c.allowExtendPlayingField,g=l.chart.renderer,e=g.text().add(d),f=[],y=l.placementStrategy[c.placementStrategy],m=c.rotation,i=l.points.map(function(t){return t.weight}),x=Math.max.apply(null,i),b=l.points.concat().sort(function(t,o){return o.weight-t.weight});l.group.attr({scaleX:1,scaleY:1}),b.forEach(function(t){var o=l.deriveFontSize(1/x*t.weight,c.maxFontSize,c.minFontSize),o=A({fontSize:o+"px"},c.style);e.css(o).attr({x:0,y:0,text:t.name}),o=e.getBBox(!0),t.dimensions={height:o.height,width:o.width}});var v=M.getPlayingField(t.len,o.len,b),w=M.getSpiral(l.spirals[c.spiral],{field:v});b.forEach(function(t){var o,e=l.deriveFontSize(1/x*t.weight,c.maxFontSize,c.minFontSize),e=A({fontSize:e+"px"},c.style),i=y(t,{data:b,field:v,placed:f,rotation:m}),n=A(l.pointAttribs(t,t.selected&&"select"),{align:"center","alignment-baseline":"middle",x:i.x,y:i.y,text:t.name,rotation:i.rotation}),r=S(i.x,i.y,t.dimensions.width,t.dimensions.height,i.rotation),a=P(r),s=M.intersectionTesting(t,{rectangle:a,polygon:r,field:v,placed:f,spiral:w,rotation:i.rotation});!s&&p&&(v=M.extendPlayingField(v,a),s=M.intersectionTesting(t,{rectangle:a,polygon:r,field:v,placed:f,spiral:w,rotation:i.rotation})),j(s)?(n.x+=s.x,n.y+=s.y,a.left+=s.x,a.right+=s.x,a.top+=s.y,a.bottom+=s.y,v=M.updateFieldBoundaries(v,a),f.push(t),t.isNull=!1):t.isNull=!0,h&&(o={x:n.x,y:n.y},u?(delete n.x,delete n.y):(n.x=0,n.y=0)),t.draw({animatableAttribs:o,attribs:n,css:e,group:d,renderer:g,shapeArgs:void 0,shapeType:"text"})}),e=e.destroy(),t=M.getScale(t.len,o.len,v),l.group.attr({scaleX:t,scaleY:t})},y.prototype.hasData=function(){return j(this)&&!0===this.visible&&p(this.points)&&0<this.points.length},y.prototype.getPlotBox=function(){var t=this.chart,o=this[(e=t.inverted)?"yAxis":"xAxis"],e=this[e?"xAxis":"yAxis"];return{translateX:(o?o.left:t.plotLeft)+(o?o.len:t.plotWidth)/2,translateY:(e?e.top:t.plotTop)+(e?e.len:t.plotHeight)/2,scaleX:1,scaleY:1}},y.defaultOptions=f(h.defaultOptions,{allowExtendPlayingField:!0,animation:{duration:500},borderWidth:0,clip:!1,colorByPoint:!0,minFontSize:1,maxFontSize:25,placementStrategy:"center",rotation:{from:0,orientations:2,to:90},showInLegend:!1,spiral:"rectangular",style:{fontFamily:"sans-serif",fontWeight:"900",whiteSpace:"nowrap"},tooltip:{followPointer:!0,pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.weight}</b><br/>'}}),A((n=y).prototype,{animate:o.prototype.animate,animateDrilldown:l,animateDrillupFrom:l,pointClass:r,setClip:l,placementStrategy:{random:function(t,o){var e=o.field;return o=o.rotation,{x:M.getRandomPosition(e.width)-e.width/2,y:M.getRandomPosition(e.height)-e.height/2,rotation:M.getRotation(o.orientations,t.index,o.from,o.to)}},center:function(t,o){return o=o.rotation,{x:0,y:0,rotation:M.getRotation(o.orientations,t.index,o.from,o.to)}}},pointArrayMap:["weight"],spirals:{archimedean:M.archimedeanSpiral,rectangular:M.rectangularSpiral,square:M.squareSpiral},utils:{extendPlayingField:M.extendPlayingField,getRotation:M.getRotation,isPolygonsColliding:u,rotate2DToOrigin:d,rotate2DToPoint:t}}),i.registerSeriesType("wordcloud",n),n}),o(t,"masters/modules/wordcloud.src.js",[],function(){})});